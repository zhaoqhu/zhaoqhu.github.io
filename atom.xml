<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.4">Jekyll</generator><link href="http://localhost:4000/atom.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2021-09-12T17:28:05+08:00</updated><id>http://localhost:4000/atom.xml</id><title type="html">Zhao Q.H.’s Notes</title><subtitle>Keep It Simple, Stupid</subtitle><author><name>Zhao Q.H.</name></author><entry><title type="html">Mac系统查看隐藏文件</title><link href="http://localhost:4000/mac/2021/09/12/mac-01/" rel="alternate" type="text/html" title="Mac系统查看隐藏文件" /><published>2021-09-12T00:00:00+08:00</published><updated>2021-09-12T00:00:00+08:00</updated><id>http://localhost:4000/mac/2021/09/12/mac-01</id><content type="html" xml:base="http://localhost:4000/mac/2021/09/12/mac-01/">&lt;p&gt;在mac系统下，默认看不到隐藏的目录，比如.git目录，通过下面的方法可以切换是否显示。&lt;/p&gt;

&lt;h1 id=&quot;使用快捷键&quot;&gt;使用快捷键&lt;/h1&gt;
&lt;p&gt;Shift+Command+.
同时按下Shift和Command和.三个键切换显示状态。&lt;/p&gt;
&lt;h1 id=&quot;使用命令行&quot;&gt;使用命令行&lt;/h1&gt;
&lt;h2 id=&quot;显示&quot;&gt;显示&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;defaults write com.apple.finder AppleShowAllFiles TRUE

killall Finder

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;隐藏&quot;&gt;隐藏&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;defaults write com.apple.finder AppleShowAllFiles FALSE

killall Finder
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Zhao Q.H.</name></author><category term="Mac" /><summary type="html">在mac系统下，默认看不到隐藏的目录，比如.git目录，通过下面的方法可以切换是否显示。</summary></entry><entry><title type="html">vscode 使用xdebug3.0.4调试</title><link href="http://localhost:4000/2021/07/10/vscode-xdebug/" rel="alternate" type="text/html" title="vscode 使用xdebug3.0.4调试" /><published>2021-07-10T00:00:00+08:00</published><updated>2021-07-10T00:00:00+08:00</updated><id>http://localhost:4000/2021/07/10/vscode-xdebug</id><content type="html" xml:base="http://localhost:4000/2021/07/10/vscode-xdebug/">&lt;h1 id=&quot;vscode-安装-php-debug-扩展&quot;&gt;vscode 安装 PHP Debug 扩展&lt;/h1&gt;
&lt;p&gt;左侧菜单栏扩展图标=&amp;gt;搜索输入框=&amp;gt;php debug=&amp;gt;点击安装&lt;/p&gt;
&lt;h1 id=&quot;vscode-安装-php-intellisense&quot;&gt;vscode 安装 PHP IntelliSense&lt;/h1&gt;
&lt;p&gt;左侧菜单栏扩展图标=&amp;gt;搜索输入框=&amp;gt;PHP IntelliSense=&amp;gt;点击安装&lt;/p&gt;
&lt;h1 id=&quot;php安装xdebug&quot;&gt;php安装xdebug&lt;/h1&gt;
&lt;p&gt;使用pecl工具来安装xdebug&lt;/p&gt;
&lt;h2 id=&quot;查找pecl工具的位置&quot;&gt;查找pecl工具的位置&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;which pecl
/usr/local/bin/pecl #pecl工具所在目录
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;使用pecl工具安装xdebug&quot;&gt;使用pecl工具安装xdebug&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pecl install xdebug

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;创建zhaoqhu-php-ext-xdebugini&quot;&gt;创建zhaoqhu-php-ext-xdebug.ini&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;zend_extension=xdebug
[xdebug]
xdebug.mode = debug 
xdebug.start_with_request = yes 
xdebug.client_port = 9001 
xdebug.client_host=192.168.100.226
xdebug.idekey=VSCODE
extension = php_screw_plus
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;复制zhaoqhu-php-ext-xdebugini文件到php的配置文件目录下&quot;&gt;复制zhaoqhu-php-ext-xdebug.ini文件到php的配置文件目录下&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cp /var/www/html/zhaoqhu-php-ext-xdebug.ini /usr/local/etc/php/conf.d/

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;检查zhaoqhu-php-ext-xdebugini文件的内容&quot;&gt;检查zhaoqhu-php-ext-xdebug.ini文件的内容&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rm -f /usr/local/etc/php/conf.d/zhaoqhu-php-ext-xdebug.ini
cat /usr/local/etc/php/conf.d/zhaoqhu-php-ext-xdebug.ini
cat /var/www/html/zhaoqhu-php-ext-xdebug.ini
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;vscode-配置launchjson文件&quot;&gt;vscode 配置launch.json文件&lt;/h1&gt;
&lt;p&gt;docker容器内的环境注意要添加pathMappings的配置，值为”server”:”local”&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Listen for Xdebug&quot;,
            &quot;type&quot;: &quot;php&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;port&quot;: 9001,
            &quot;pathMappings&quot;: {
                &quot;/var/www/html&quot;:&quot;/Users/zhaoqinghu/dev_docker/nextcloud/nextcloud&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Launch currently open script&quot;,
            &quot;type&quot;: &quot;php&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;program&quot;: &quot;${file}&quot;,
            &quot;cwd&quot;: &quot;${fileDirname}&quot;,
            &quot;port&quot;: 9001
        }
    ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;调试&quot;&gt;调试&lt;/h1&gt;
&lt;p&gt;exec&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cat /sys/class/dmi/id/product_uuid
cat /sys/class/dmi/id/board_serial
cat /sys/class/dmi/id/board_name
cat /sys/class/dmi/id/
cat /sys/class/net/eth0/speed
cat /sys/class/net/eth0/status

		$product_uuid  = shell_exec('cat /sys/class/dmi/id/product_uuid');
		$board_serial  = shell_exec('cat /sys/class/dmi/id/board_serial');
		$board_name  = shell_exec('cat /sys/class/dmi/id/board_name');
		$product_name  = shell_exec('cat sys/class/dmi/id/product_name');
		$speed  = shell_exec('cat /sys/class/net/eth0/speed');
make -p /home/dmi/ &amp;amp;&amp;amp; cp -rf /sys/class/dmi/id/ /home/dmi/ &amp;amp;&amp;amp; chmod -R 777 /home/dmi/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Zhao Q.H.</name></author><summary type="html">vscode 安装 PHP Debug 扩展 左侧菜单栏扩展图标=&amp;gt;搜索输入框=&amp;gt;php debug=&amp;gt;点击安装 vscode 安装 PHP IntelliSense 左侧菜单栏扩展图标=&amp;gt;搜索输入框=&amp;gt;PHP IntelliSense=&amp;gt;点击安装 php安装xdebug 使用pecl工具来安装xdebug 查找pecl工具的位置 which pecl /usr/local/bin/pecl #pecl工具所在目录 使用pecl工具安装xdebug ``` pecl install xdebug</summary></entry><entry><title type="html">Mac系统下设置全局默认的php版本和Mysql的版本</title><link href="http://localhost:4000/php/2021/04/18/mac-default-php-mysql/" rel="alternate" type="text/html" title="Mac系统下设置全局默认的php版本和Mysql的版本" /><published>2021-04-18T00:00:00+08:00</published><updated>2021-04-18T00:00:00+08:00</updated><id>http://localhost:4000/php/2021/04/18/mac-default-php-mysql</id><content type="html" xml:base="http://localhost:4000/php/2021/04/18/mac-default-php-mysql/">&lt;h1 id=&quot;mac系统下设置全局默认的php版本&quot;&gt;Mac系统下设置全局默认的php版本&lt;/h1&gt;
&lt;p&gt;Mac系统版本Mac OS big Sur，这个版本的系统默认装的php版本是php7.3.24 ,可能你还会在自己的电脑上安装其他的php版本，比如php5,php7.1.5,,php7.4.16。如果电脑上面装了多个版本的php，可以指定某一个版本的php为全局默认的，假如我们设定全局默认的php版本是php7.1.5&lt;/p&gt;
&lt;h2 id=&quot;找到php715版本bin目录下的二进制可执行的php文件&quot;&gt;找到php7.1.5版本bin目录下的二进制可执行的php文件&lt;/h2&gt;
&lt;p&gt;所在目录的路径为&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/local/php7-15/bin/php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;找到-zshrc&quot;&gt;找到 ~/.zshrc&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd ~/
ls -al #列出目录下面所有文件
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;修改-zshrc&quot;&gt;修改 ~/.zshrc&lt;/h2&gt;
&lt;p&gt;使用超级管理员的权限命令打开.zshrc文件&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo vim ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;将下面的设定php全局变量的命令粘贴到.zshrc文件中&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export PATH=&quot;/usr/local/php7-15/bin:$PATH&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;重新载入-zshrc文件&quot;&gt;重新载入 ~/.zshrc文件&lt;/h2&gt;

&lt;p&gt;执行下面的命令重新载入.zshrc文件，使添加的php全局变量执行文件生效。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;source ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;mysql设置指定版本为全局变量&quot;&gt;MySQL设置指定版本为全局变量&lt;/h1&gt;
&lt;p&gt;指定方法可以参考设定PHP指定版本为全局变量的方法。&lt;/p&gt;</content><author><name>Zhao Q.H.</name></author><category term="php" /><summary type="html">Mac系统下设置全局默认的php版本 Mac系统版本Mac OS big Sur，这个版本的系统默认装的php版本是php7.3.24 ,可能你还会在自己的电脑上安装其他的php版本，比如php5,php7.1.5,,php7.4.16。如果电脑上面装了多个版本的php，可以指定某一个版本的php为全局默认的，假如我们设定全局默认的php版本是php7.1.5 找到php7.1.5版本bin目录下的二进制可执行的php文件 所在目录的路径为 /usr/local/php7-15/bin/php 找到 ~/.zshrc cd ~/ ls -al #列出目录下面所有文件 修改 ~/.zshrc 使用超级管理员的权限命令打开.zshrc文件 sudo vim ~/.zshrc 将下面的设定php全局变量的命令粘贴到.zshrc文件中</summary></entry><entry><title type="html">Php7.4.16</title><link href="http://localhost:4000/2021/04/18/php7.4.16/" rel="alternate" type="text/html" title="Php7.4.16" /><published>2021-04-18T00:00:00+08:00</published><updated>2021-04-18T00:00:00+08:00</updated><id>http://localhost:4000/2021/04/18/php7.4.16</id><content type="html" xml:base="http://localhost:4000/2021/04/18/php7.4.16/">&lt;p&gt;apcu
bcmath
Core
ctype
curl
date
dom
exif
fileinfo
filter
ftp
gd
gmp
hash
iconv
imagick
intl
json
ldap
libxml
mbstring
memcached
mysqlnd
openssl
pcntl
pcre
PDO
pdo_mysql
pdo_pgsql
pdo_sqlite
Phar
posix
readline
redis
Reflection
session
SimpleXML
sodium
SPL
sqlite3
standard
tokenizer
xml
xmlreader
xmlwriter
Zend OPcache
zip
zlib&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/local/etc/php/conf.d/docker-php-ext-apcu.ini, 
/usr/local/etc/php/conf.d/docker-php-ext-bcmath.ini,
 /usr/local/etc/php/conf.d/docker-php-ext-exif.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-gd.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-gmp.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-imagick.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-intl.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-ldap.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-memcached.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-opcache.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-pcntl.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-pdo_mysql.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-pdo_pgsql.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-redis.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-sodium.ini, 
 /usr/local/etc/php/conf.d/docker-php-ext-zip.ini, 
 /usr/local/etc/php/conf.d/nextcloud.ini, 
 /usr/local/etc/php/conf.d/opcache-recommended.ini
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;'./configure' '--build=x86_64-linux-gnu' '--with-config-file-path=/usr/local/etc/php' '--with-config-file-scan-dir=/usr/local/etc/php/conf.d' '--enable-option-checking=fatal' '--with-mhash' '--with-pic' '--enable-ftp' '--enable-mbstring' '--enable-mysqlnd' '--with-password-argon2' '--with-sodium=shared' '--with-pdo-sqlite=/usr' '--with-sqlite3=/usr' '--with-curl' '--with-libedit' '--with-openssl' '--with-zlib' '--with-pear' '--with-libdir=lib/x86_64-linux-gnu' '--with-apxs2' '--disable-cgi' 'build_alias=x86_64-linux-gnu'

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;'./configure' '--build=x86_64-linux-gnu' '--with-config-file-path=/usr/local/etc/php' '--with-config-file-scan-dir=/usr/local/etc/php/conf.d' '--enable-option-checking=fatal' '--with-mhash' '--with-pic' '--enable-ftp' '--enable-mbstring' '--enable-mysqlnd' '--with-password-argon2' '--with-sodium=shared' '--with-pdo-sqlite=/usr' '--with-sqlite3=/usr' '--with-curl' '--with-libedit' '--with-openssl' '--with-zlib' '--with-pear' '--with-libdir=lib/x86_64-linux-gnu' '--with-apxs2' '--disable-cgi' 'build_alias=x86_64-linux-gnu'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./configure --prefix=/usr/local/php-7.2.9 \
	--with-config-file-path=/usr/local/php-7.2.9/etc \
	--with-mysql=mysqlnd \
	--with-mysqli=mysqlnd \
	--with-pdo-mysql=mysqlnd \
	--enable-fpm \
	--enable-fastcgi \
	--enable-static \
	--enable-inline-optimization \
	--enable-sockets \
	--enable-wddx \
	--enable-zip \
	--enable-calendar \
	--enable-bcmath \
	--enable-soap \
	--with-zlib \
	--with-iconv \
	--with-gd \
	--with-xmlrpc \
	--enable-mbstring \
	--without-sqlite \
	--with-curl \
	--enable-ftp \
	--with-mcrypt  \
	--with-freetype-dir \
	--with-jpeg-dir \
	--with-png-dir \
	--disable-ipv6 \
	--disable-debug \
	--with-openssl \
	--disable-maintainer-zts \
	--disable-safe-mode \
	--disable-fileinfo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Zhao Q.H.</name></author><summary type="html">apcu bcmath Core ctype curl date dom exif fileinfo filter ftp gd gmp hash iconv imagick intl json ldap libxml mbstring memcached mysqlnd openssl pcntl pcre PDO pdo_mysql pdo_pgsql pdo_sqlite Phar posix readline redis Reflection session SimpleXML sodium SPL sqlite3 standard tokenizer xml xmlreader xmlwriter Zend OPcache zip zlib</summary></entry><entry><title type="html">nextcloud yml安装</title><link href="http://localhost:4000/nextcloud/2021/03/09/nextcloud-yml/" rel="alternate" type="text/html" title="nextcloud yml安装" /><published>2021-03-09T00:00:00+08:00</published><updated>2021-03-09T00:00:00+08:00</updated><id>http://localhost:4000/nextcloud/2021/03/09/nextcloud-yml</id><content type="html" xml:base="http://localhost:4000/nextcloud/2021/03/09/nextcloud-yml/">&lt;h2 id=&quot;创建nextcloud安装目录&quot;&gt;创建nextcloud安装目录&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir nextcloud
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;创建mysql目录用于数据卷映射&quot;&gt;创建mysql目录用于数据卷映射&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd ~/nextcloud
mkdir mysql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;创建nextcloud文件目录用于映射&quot;&gt;创建nextcloud文件目录用于映射&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd nextcloud
mkdir nextcloud
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;创建docker-composeyml文件内容如下&quot;&gt;创建docker-compose.yml文件，内容如下&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;version: '2'

volumes:
  nextcloud:
  db:

services:
  db:
    image: mysql
    restart: always
    command: --default-authentication-plugin=mysql_native_password
    volumes:
      - /Users/zhaoqinghu/dev_docker/nextcloud/mysql:/var/lib/mysql
    environment:
      - MYSQL_ROOT_PASSWORD=12345678
      - MYSQL_PASSWORD=nextcloud
      - MYSQL_DATABASE=nextcloud
      - MYSQL_USER=nextcloud

  app:
    image: nextcloud
    restart: always
    ports:
      - 7080:80
    links:
      - db
    volumes:
      - /Users/zhaoqinghu/dev_docker/nextcloud/nextcloud:/var/www/html
    environment:
      - MYSQL_PASSWORD=
      - MYSQL_DATABASE=nextcloud
      - MYSQL_USER=nextcloud
      - MYSQL_HOST=db

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>Zhao Q.H.</name></author><category term="nextcloud" /><summary type="html">创建nextcloud安装目录 mkdir nextcloud 创建mysql目录用于数据卷映射 cd ~/nextcloud mkdir mysql 创建nextcloud文件目录用于映射 cd nextcloud mkdir nextcloud 创建docker-compose.yml文件，内容如下 ``` version: ‘2’</summary></entry><entry><title type="html">php面试</title><link href="http://localhost:4000/php/2021/02/05/php-ms/" rel="alternate" type="text/html" title="php面试" /><published>2021-02-05T00:00:00+08:00</published><updated>2021-02-05T00:00:00+08:00</updated><id>http://localhost:4000/php/2021/02/05/php-ms</id><content type="html" xml:base="http://localhost:4000/php/2021/02/05/php-ms/">&lt;h2 id=&quot;线程和进程的区别&quot;&gt;线程和进程的区别&lt;/h2&gt;

&lt;p&gt;简而言之,一个程序至少有一个进程,一个进程至少有一个线程&lt;/p&gt;

&lt;p&gt;php-fpm是一个主进程master和多个工作进程worker，每个php-fpm进程有一个线程。&lt;/p&gt;

&lt;p&gt;1、php的哪些语言特性，在合适的场景可以显著减少内存开销？
spl
trait
Generator
type hint
2、对于php的自动加载描述正确的是？
Composer的自动加载是通过__autoload函数实现
在文件顶部use的时候会载入对应的类
自动加载函数只支持按Class/Interface/Trait名加载，不能按function名加载
现在大多数类库都遵循psr0规范
3、对于Trait描述正确的是
可以用来减少重复代码
一个类无法同时引入两个包含相同方法的Trait
子类中引入的Trait利的方法会覆盖父类的方法
在Trait中不可以调用引用类里的方法
4、下列对Composer描述正确的是
拿到一个Project类型的项目时，需要通过composer update来安装对应的依赖包
一般情况下应该把PHPUnit包含在require段
composer.json不仅可以指定依赖的PHP类库，还能指定依赖的PHP扩展
Library类型的项目，需要把composer.lock文件提交到版本库中
5、如果一个包遵循Semantic Version，下列哪些版本升级大概率不会出问题
6、按照RESTFul的规范，修改文章的展示隐藏应该使用哪一种路由
7、通常使用过滤特殊字符的方式来避免SQL注入
8、只要项目中使用了PDO的prepare就能完全避免SQL注入
9、CSRF攻击是因为没有对用户输入进行转义导致的
14、为了避免XSS攻击，需要在写入数据库前对其转义，从数据库读取后反转义&lt;/p&gt;</content><author><name>Zhao Q.H.</name></author><category term="PHP" /><summary type="html">线程和进程的区别</summary></entry><entry><title type="html">Elasticsearch 学习</title><link href="http://localhost:4000/2021/02/04/Elesticsearch/" rel="alternate" type="text/html" title="Elasticsearch 学习" /><published>2021-02-04T00:00:00+08:00</published><updated>2021-02-04T00:00:00+08:00</updated><id>http://localhost:4000/2021/02/04/Elesticsearch</id><content type="html" xml:base="http://localhost:4000/2021/02/04/Elesticsearch/"></content><author><name>Zhao Q.H.</name></author><summary type="html"></summary></entry><entry><title type="html">php高级教程-大型电商平台双十一Redis高并发秒杀解决方案</title><link href="http://localhost:4000/php/2021/01/28/php-redis-seckill/" rel="alternate" type="text/html" title="php高级教程-大型电商平台双十一Redis高并发秒杀解决方案" /><published>2021-01-28T00:00:00+08:00</published><updated>2021-01-28T00:00:00+08:00</updated><id>http://localhost:4000/php/2021/01/28/php-redis-seckill</id><content type="html" xml:base="http://localhost:4000/php/2021/01/28/php-redis-seckill/">&lt;h2 id=&quot;使用场景介绍&quot;&gt;使用场景介绍&lt;/h2&gt;
&lt;h3 id=&quot;秒杀红包&quot;&gt;秒杀红包&lt;/h3&gt;
&lt;p&gt;1、时间短、数量少
2、大流量、高并发&lt;/p&gt;

&lt;h3 id=&quot;数据安全&quot;&gt;数据安全&lt;/h3&gt;
&lt;p&gt;1、业务场景、高并发会引发问题
2、压力测试工具的使用
3、悲观锁、乐观锁、lua脚本
4、不同场景的解决方案
2.2redis一些相关的原理（10服用、原子性）&lt;/p&gt;

&lt;h3 id=&quot;秒杀场景遇到的问题&quot;&gt;秒杀场景遇到的问题&lt;/h3&gt;
&lt;p&gt;1、卡顿崩溃
2、超卖（库存变为负数）&lt;/p&gt;

&lt;p&gt;模拟秒杀库存只有3件的商品，如果用压力测试工具进行模拟500人进行秒杀的情况，比如发送了5000次链接，如果不做处理
一定会出现商品超卖的情况，实际成功的订单会大于3个，商品库存会变成负数，比如-36，那实际上成功的订单会是39个订单，超卖了36件，这样子就赔钱了。&lt;/p&gt;
&lt;h2 id=&quot;使用压力测试工具模拟高并发场景&quot;&gt;使用压力测试工具模拟高并发场景&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ab -n 请求数 -c 并发数 url地址
ab -n 500 -c 5000 http://127.0.0.1/seckill/buy.php #模拟500个客户端发送5000个请求
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;解决办法&quot;&gt;解决办法&lt;/h2&gt;
&lt;h3 id=&quot;数据库悲观锁&quot;&gt;数据库悲观锁&lt;/h3&gt;

&lt;h3 id=&quot;redis&quot;&gt;redis&lt;/h3&gt;
&lt;p&gt;1、redis速度快（单机的读写速度可以达到8万左右）
2、数据限制
悲观锁：假设当前的数据操作一定会发生冲突的，屏蔽一切（行锁、文件锁）&lt;/p&gt;

&lt;p&gt;如果用mysql的行锁会导致阻塞、等待状态，会崩溃。
性能差，速度慢。&lt;/p&gt;

&lt;p&gt;乐观锁：假设当前的数据不会发生并发冲突，在真写数据的时候，再去检查，有没有发生冲突。&lt;/p&gt;

&lt;p&gt;苹果商店排行20的App
淘宝客
双十一销售额，5亿，每秒并发14w&lt;/p&gt;</content><author><name>Zhao Q.H.</name></author><category term="PHP" /><category term="PHP" /><summary type="html">使用场景介绍 秒杀红包 1、时间短、数量少 2、大流量、高并发</summary></entry><entry><title type="html">Redis nginx memcached</title><link href="http://localhost:4000/redis/nginx/memcached/2021/01/25/Redis-nginx-memchached/" rel="alternate" type="text/html" title="Redis nginx memcached" /><published>2021-01-25T00:00:00+08:00</published><updated>2021-01-25T00:00:00+08:00</updated><id>http://localhost:4000/redis/nginx/memcached/2021/01/25/Redis-nginx-memchached</id><content type="html" xml:base="http://localhost:4000/redis/nginx/memcached/2021/01/25/Redis-nginx-memchached/"></content><author><name>Zhao Q.H.</name></author><summary type="html"></summary></entry><entry><title type="html">Redis 学习</title><link href="http://localhost:4000/nosql/redis/2021/01/23/redis-learning/" rel="alternate" type="text/html" title="Redis 学习" /><published>2021-01-23T00:00:00+08:00</published><updated>2021-01-23T00:00:00+08:00</updated><id>http://localhost:4000/nosql/redis/2021/01/23/redis-learning</id><content type="html" xml:base="http://localhost:4000/nosql/redis/2021/01/23/redis-learning/">&lt;h2 id=&quot;版本&quot;&gt;版本&lt;/h2&gt;
&lt;p&gt;当前最新版本是6.0&lt;/p&gt;

&lt;h2 id=&quot;redis安装&quot;&gt;redis安装&lt;/h2&gt;

&lt;p&gt;下载最新的稳定版，
make
make PREFIX=/usr/local/redis install
cd /usr/local/redis/bin #进入redis安装后的binary目录
ls #查看目录下的命令行工具&lt;/p&gt;

&lt;p&gt;redis-benhmark  #redis性能测试工具
redis-check-aof #检查aof日志的工具
redis-check-dump #检查rdb日志的工具
redis-cli #链接用的客户端工具
redis-server #redis服务进程&lt;/p&gt;

&lt;h2 id=&quot;启动&quot;&gt;启动&lt;/h2&gt;

&lt;h3 id=&quot;复制redis源码中的配置文件&quot;&gt;复制redis源码中的配置文件&lt;/h3&gt;
&lt;p&gt;cd /usr/local/redis
cp /usr/local/src/redis-2.6.16/redis.conf ./&lt;/p&gt;
&lt;h3 id=&quot;启动redis服务&quot;&gt;启动redis服务&lt;/h3&gt;
&lt;p&gt;/usr/local/redis/bin/redis-server ./redis.onf&lt;/p&gt;

&lt;h3 id=&quot;redis后台运行服务&quot;&gt;redis后台运行服务&lt;/h3&gt;

&lt;p&gt;修改redis.conf中的daemonize改为yes&lt;/p&gt;

&lt;h2 id=&quot;五大value&quot;&gt;五大Value&lt;/h2&gt;

&lt;h3 id=&quot;string字符串类型的操作&quot;&gt;String字符串类型的操作&lt;/h3&gt;
&lt;p&gt;set key value [ex 秒数][px 毫秒数]&lt;/p&gt;

&lt;p&gt;如果 ex 秒数和px 毫秒数，同时使用，则以后面的为准&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;flushdb #清空数据
set site www.zixue.it
ttl site #查看生命周期,默认的生命周期是永久

set search www.baidu.com ex 10 px 6567

pttl search
flush db

flushdb #清空数据
set site www.so.com
set site www.baidu.com nx# nx的参数表示如果没有这个key才可以执行
get site #返回结果依然是www.so.com
set site www.google.com xx #xx的参数表示如果有这个key才可以执行
get site #返回值是www.google.com
set abc www.google.com xx#xx表示有这个key才可以执行

mset a aman b bold c controller d diamond
keys #返回a、b、c、d
mget a b c#一次获取多个key

flushdb

set word hello
get word
setrange word 2 ??
get word #返回结果he??o
set word hello 
setrange word 6 !
get world #返回结果hello\x00!
append word @@
#getrange key start stop
set area chinese
getrange area 1 4 

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;字符串
数值
二进制
help @String&lt;/p&gt;

&lt;h3 id=&quot;list链表&quot;&gt;List链表&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;lpush charlist a
rpush charlist b
rpush charlist b
lpush charlist 0
lrange charlist 1 2
lrange charlist 1 3
lrange charlist 0 3
lrange charlist 0 -1 #查看所有的链表上的值
lpop charlist #弹出最左边的值，链表上的值会消失
rpop charlist #弹出最右边的值，链表上的值会消失
flushdb #清空所有
rpush answer a b c a b d a

lrem answer 1 b#删除链表answer上的一个b
lrem answer -2 a#从链表answer最后开始删除两个a
fushdb
rpush charlist a b c d e f
lrange charlist 0 -1
ltrim charlist 2 5
lindex charlist  0
lindex charlist 1
lindex charlist 2
llen charlist #查看链表的长度
lrpush num 1 3 6 8 9 #创建一个num链表
linsert num before 3 2 #在链表num值3的前面添加2
linsert num after 9 10
lrange num 0 -1
linsert num after 99 10
linsert num after 9 10
flushdb
rpush task a b c d
rpoplpush task job #右边弹出task链表的值d存储到链表d左边
rpop job 
brpop job 20 #等待20秒,当收到新值后结束
lpush job e
blop job


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;位图法统计活跃用户3天连续登录&quot;&gt;位图法统计活跃用户3天连续登录&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;setbit mon 1000000000 0
setbit mon 3 1
setbit mon 5 1
setbit mon 7 1

set tues 100000000 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;hash&quot;&gt;Hash&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;hset user1 name lisi
hset user1 age 28
hset user1 height 175
hgetall user1
hmset user2 name wang age 10 height 100
hgetall user2
hget user1 name 
hget user2 name
hmget user1 name height
hgetall user1
hdel user1 age
hgetall user1
hlen uesr1
hlen user2
hexists user1 age
hexists user2 age
hincrby user2 age 1
hgetall user2
hget user2 age
hincrbyfloat user2 age 0.5
hkeys user2
hvals user2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;set&quot;&gt;Set&lt;/h3&gt;
&lt;p&gt;1、无序性 2、确定性 3、唯一性&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sadd gender male female
sadd gender yao yao
sadd gender yao
smembers gender #查看gender所有的值
srem gender yao #删除yao
srem gender x c #删除失败(integer 0)
srem gender male x c #成功删除(male)
spop key #随机删除
sadd gender a b c d e f 
spop gender #随机删除无序集合gender里的值
smembers gender

srandmember gender
sismember gender Q #判断某个vlue在某个集合中
sismember gender f
scard gender #返回集合中元素的个数
sadd uuper A B C
sadd lower a b c

smove upper lower A #移动upper集合中的A到集合lower中
smembers upper
smembers lower

sadd lisi a b c d
sadd wang a b c d e f
sadd poly a b c d g

sinter lisi wang poly #求交集
sunion lisi wang poly#求并集
sdiff lisi wang
sinter lisi wang poly
sintersrore result lisi wang poly #求并集存入到result

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;zset&quot;&gt;ZSet&lt;/h3&gt;

&lt;p&gt;order set 有序集合&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;flushdb
zadd class 12 lily 13 lucy 18 lilei 6 poly
zrange class 0 3#有序的查询出class集合中的前四个人
zrangebyscore class 13 18 #查询13岁到18岁的人
zrangebyscore class 1 20 limit 1 2
zrange class 1 3 withscores
zrangebyscore class 10 20 withscores #查看分数去某个范围内元素。
zrange class 0 -1
zrank class lily
zrank class poly
zrank class lilei
zrank class zhangfei
zrevrank class lilei
zrange class 0 -1 withscores
zremrangebysore class 10 15
zrange class 0 -1 withscores
zadd class 12 lily 13 lucy
zremrangebyrank class 0 1#删除poly 和lily
zrange class 0 -1 withscores
zrem class lucy
zrange class 0 -1 withscores
zrem class lilei
zrane class 0 -1 withscores
zadd ty 25 zhangfei 27 guanyu 28 libei
zcard ty 
zadd ty 23 zhaoyun
zcard ty
zcoun ty 25 30
flushdb
zadd lisi 3 cat 5 dog 6 horse
zadd wang 5 cat 6 dog 8 horse 1 donckey
zinterstore result 2 lisi wang
zrange result 0 -1 

zinterstore result 2 lisi wang aggregate min
zrange result 0 -1
zinterstore result 2 lisi wang aggregate max

zinterstore result 2 lisi wang weight 2 1 aggreagate max
zrange result 0 -1 withscores

zinterstore result 2 lisi wang weights 2 1 aggregate sum 
zrange result 0 -1 withscores
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;redis-事务&quot;&gt;redis 事务&lt;/h2&gt;
&lt;p&gt;redis开启事务后，所有的执行语句先放入到队列中，如果想取消可以执行discard命令，但是如果执行exec后，在队列中的语句已经执行成功了，回滚不回来，不支持回滚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fulshdb
set wang 200
set zhao 700
multi #开启事务
decrby zhao 100
incryby wang 100
exec #执行成功
multi #开启事务
decryby zhao 100
sdfa
exec 执行错误
mget zhao wang
multi #开启事务
decryby zhao 100
sadd wang pig
exec #执行错误
multi #开启事务
decrby zhao 100
incrby wang 100
discard #取消 
#买票场景当车票只剩一张时，李四正在买票，redis开启事务，已经把修改车票和修改用户钱数的语句放到队列，还未执行exec，正在此时，王五把这张票买走了。

flushdb
set ticket 1
set lisi 300
set wang 300
#李四买票
multi
decr ticket
decrby lisi 100
#exec尚未执行exec


#王五买票成功了。
decr ticket

get ticket

#李四开启watch买票
set ticket 1
watch ticket
multi
decr ticket
decrby lisi 100
#exec尚未执行，这时王五又执行了
desc ticket
get ticket

watch key1 key2 key3#监听多个key
unwatch #取消监听多个key

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;频道发布与消息订阅&quot;&gt;频道发布与消息订阅&lt;/h2&gt;

&lt;p&gt;服务端&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;publish news &quot;today is sunshine&quot;
publish news &quot;still sunshine&quot;
publish news &quot;away sunshine&quot;
publish news &quot;thress&quot;
publish newstop &quot;four&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;客户端1&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;subscribe news
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;客户端2&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;subscribe news
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;psubscribe new*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;redis和memcached相比的独特之处&quot;&gt;redis和memcached相比的独特之处&lt;/h2&gt;

&lt;p&gt;1、redis可以用来做存储(storage)，而memcached是用来做缓存(cache)，这个特点主要因为其有持久化的功能
2、存储的数据有“结构”，对于memcached来说，存储的数据，只有1种类型“字符串”，而redis则可以存储字符串、链表、哈希结构、集合、有序集合&lt;/p&gt;</content><author><name>Zhao Q.H.</name></author><summary type="html">版本 当前最新版本是6.0</summary></entry></feed>